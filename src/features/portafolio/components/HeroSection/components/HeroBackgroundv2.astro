---
import { Image } from "astro:assets";
import bg from "@/assets/backgrounds/hero.gif";
import { cn } from "@/shared/lib/utils";
---

<div class="w-full h-full overflow-hidden pointer-events-none">
  <!-- IMAGE LAYER -->
  <div class="absolute inset-0 overflow-hidden">
    <Image
      src={bg}
      alt="Hero Background"
      class={cn(
        `
        w-full h-full 
        md:scale-100 xl:scale-220 
        object-cover 
        invert 
        dark:invert-0 
        hue-rotate-20 dark:hue-rotate-250
        contrast-200
        brightness-60
      `,
      )}
      loading="eager"
      fetchpriority="high"
    />
    <div class="absolute inset-0 backdrop-blur-md md:backdrop-blur-xl"></div>
  </div>

  <!-- FX LAYER -->
  <div
    class="absolute inset-0 overflow-hidden"
  >
    <!-- Grid Layer -->
    <div 
      class="opacity-50 absolute inset-0 bg-[linear-gradient(to_right,rgba(128,128,128,0.2)_1px,transparent_1px),linear-gradient(to_bottom,rgba(128,128,128,0.2)_1px,transparent_1px)] bg-size-[40px_40px] mask-[radial-gradient(ellipse_80%_80%_at_50%_0%,#000_20%,transparent_100%)]"
    ></div>

    <!-- Top shadow/fade to keep AppBar area neutral -->
    <div class="absolute top-0 left-0 right-0 h-48 bg-linear-to-b from-white via-white/80 to-transparent dark:from-black dark:via-black/80 dark:to-transparent z-10"></div>

    <!-- Animated Light Blobs -->
    <div class="absolute inset-0 opacity-30 dark:opacity-10">
      <div 
        class="absolute top-[10%] left-[-5%] w-125 h-125 bg-indigo-500/30 rounded-full blur-[120px] animate-blob"
      ></div>
      <div 
        class="absolute top-[20%] right-[-5%] w-100 h-100 bg-sky-400/20 rounded-full blur-[100px] animate-blob animation-delay-2000"
      ></div>
      <div 
        class="absolute bottom-[20%] left-[10%] w-150 h-150 bg-indigo-500/20 rounded-full blur-[140px] animate-blob animation-delay-4000"
      ></div>
      <div 
        class="absolute top-[40%] left-[40%] w-100 h-100 bg-blue-300/10 rounded-full blur-[80px] animate-blob animation-delay-3000"
      ></div>
    </div>
  </div>

  <!-- TRANSITION LAYER -->
  <div
    class="absolute top-0 w-full h-full bg-linear-to-b from-transparent via-transparent to-white dark:to-black z-20"
  >
  </div>
</div>

<style>
  @keyframes blob {
    0% {
      transform: translate(0px, 0px) scale(1);
    }
    33% {
      transform: translate(30px, -50px) scale(1.1);
    }
    66% {
      transform: translate(-20px, 20px) scale(0.9);
    }
    100% {
      transform: translate(0px, 0px) scale(1);
    }
  }

  .animate-blob {
    animation: blob 10s infinite alternate cubic-bezier(0.4, 0, 0.2, 1);
  }

  .animation-delay-2000 {
    animation-delay: 2s;
  }

  .animation-delay-3000 {
    animation-delay: 3s;
  }

  .animation-delay-4000 {
    animation-delay: 4s;
  }
</style>
